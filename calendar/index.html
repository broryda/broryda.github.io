---
layout: default
title: "ë°”ë‘‘ëŒ€íšŒ ìº˜ë¦°ë”"
---

<h1 style="text-align:center;">ğŸ“† ë°”ë‘‘ëŒ€íšŒ ì¼ì • ìº˜ë¦°ë”</h1>

<div class="cal-wrap">
  <div class="cal-controls">
    <button id="prevBtn" aria-label="ì´ì „ ë‹¬">â—€ï¸</button>
    <div class="cal-title">
      <select id="yearSelect"></select>
      <select id="monthSelect"></select>
    </div>
    <button id="nextBtn" aria-label="ë‹¤ìŒ ë‹¬">â–¶ï¸</button>
    <button id="todayBtn" class="today">ì˜¤ëŠ˜</button>
  </div>

  <div id="calendar"></div>
</div>

<style>
.cal-wrap{max-width:820px;margin:1.5rem auto;padding:0 8px;font-family:system-ui,sans-serif}
.cal-controls{display:flex;gap:.5rem;align-items:center;justify-content:center;margin-bottom:.75rem;flex-wrap:wrap}
.cal-controls button{border:1px solid #e5e7eb;background:#fff;border-radius:.5rem;padding:.45rem .7rem;cursor:pointer}
.cal-controls .today{background:#1d4ed8;color:#fff;border-color:#1d4ed8}
.cal-title{display:flex;gap:.5rem;align-items:center}
.cal-title select{padding:.4rem .5rem;border:1px solid #e5e7eb;border-radius:.5rem}

#calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;text-align:center}
.weekday{font-weight:600;background:#f3f4f6;padding:.5rem;border-radius:.5rem}
.day{border:1px solid #e5e7eb;border-radius:.5rem;min-height:100px;padding:.5rem;position:relative}
.day .date{font-weight:700;color:#374151}
.day.muted{opacity:.45}
.event{display:block;margin-top:.25rem;font-size:.8rem;color:#1d4ed8;text-decoration:none;line-height:1.25}
.event:hover{text-decoration:underline}
.legend{margin:.75rem 0 0;text-align:center;color:#6b7280;font-size:.9rem}
</style>

<script>
// 1) ëª¨ë“  í¬ìŠ¤íŠ¸ë¥¼ Liquidë¡œ ì£¼ì…
const ALL_POSTS = [
  {% for post in site.posts %}
  { date: "{{ post.date | date: '%Y-%m-%d' }}",
    title: "{{ post.title | escape }}",
    url: "{{ post.url | relative_url }}" },
  {% endfor %}
];

// 2) ë‚ ì§œë³„ë¡œ ë§µ êµ¬ì„±
const eventsByDate = {};
ALL_POSTS.forEach(p => {
  (eventsByDate[p.date] ||= []).push(p);
});

// 3) ìœ í‹¸
const pad = n => String(n).padStart(2, "0");
const qs = new URLSearchParams(location.search);
const clamp = (min, v, max) => Math.min(Math.max(v, min), max);

// 4) ë Œë”
function renderCalendar(year, month){ // month: 0-11
  const cal = document.getElementById("calendar");
  cal.innerHTML = "";

  // ìš”ì¼ í—¤ë”
  const weekdays = ["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "];
  weekdays.forEach(d=>{
    const div=document.createElement('div');
    div.className='weekday';
    div.textContent=d;
    cal.appendChild(div);
  });

  const first = new Date(year, month, 1);
  const last  = new Date(year, month+1, 0);
  const prevLast = new Date(year, month, 0);

  const startOffset = first.getDay();
  const totalCells  = startOffset + last.getDate();
  const rows = Math.ceil(totalCells/7);
  const needed = rows*7;

  // ì´ì „ë‹¬ ë§ì¼ ì±„ìš°ê¸°(ì—°í•œ í‘œì‹œ)
  for(let i=0;i<startOffset;i++){
    const d = prevLast.getDate()-startOffset+i+1;
    cal.appendChild(dayCell(year, month-1, d, true));
  }
  // ì´ë²ˆë‹¬
  for(let d=1; d<=last.getDate(); d++){
    cal.appendChild(dayCell(year, month, d, false));
  }
  // ë‹¤ìŒë‹¬ ì±„ìš°ê¸°(ì—°í•œ í‘œì‹œ)
  const remain = needed - (startOffset + last.getDate());
  for(let d=1; d<=remain; d++){
    cal.appendChild(dayCell(year, month+1, d, true));
  }
}

function dayCell(y, m, d, muted){
  const cell = document.createElement('div');
  cell.className = 'day' + (muted ? ' muted' : '');
  const dateStr = `${y}-${pad(m+1)}-${pad(d)}`;

  const head = document.createElement('div');
  head.className = 'date';
  head.textContent = d;
  cell.appendChild(head);

  (eventsByDate[dateStr]||[]).forEach(ev=>{
    const a=document.createElement('a');
    a.href=ev.url; a.className='event'; a.textContent=ev.title;
    cell.appendChild(a);
  });
  return cell;
}

// 5) ì»¨íŠ¸ë¡¤(ì—°/ì›” ì„ íƒ + ì´ì „/ë‹¤ìŒ + ì˜¤ëŠ˜)
function initControls(initialY, initialM){
  const ySel = document.getElementById('yearSelect');
  const mSel = document.getElementById('monthSelect');
  const prev = document.getElementById('prevBtn');
  const next = document.getElementById('nextBtn');
  const todayBtn = document.getElementById('todayBtn');

  // ì—°ë„ ë²”ìœ„(í¬ìŠ¤íŠ¸ ìˆëŠ” ì—°Â±2ë…„)
  const years = ALL_POSTS.map(p=>+p.date.slice(0,4));
  const minY = Math.min(...years, new Date().getFullYear()) - 2;
  const maxY = Math.max(...years, new Date().getFullYear()) + 2;

  for(let y=minY; y<=maxY; y++){
    const o=document.createElement('option');
    o.value=y; o.textContent=`${y}ë…„`;
    ySel.appendChild(o);
  }
  for(let m=0; m<12; m++){
    const o=document.createElement('option');
    o.value=m; o.textContent=`${m+1}ì›”`;
    mSel.appendChild(o);
  }

  function sync(y,m,updateURL=true){
    ySel.value=y; mSel.value=m;
    renderCalendar(y,m);
    if(updateURL){
      const u=new URL(location.href);
      u.searchParams.set('y',y);
      u.searchParams.set('m',m+1);
      history.replaceState({},'',u);
    }
  }

  ySel.addEventListener('change', ()=> sync(+ySel.value, +mSel.value));
  mSel.addEventListener('change', ()=> sync(+ySel.value, +mSel.value));
  prev.addEventListener('click', ()=>{
    let y=+ySel.value, m=+mSel.value-1;
    if(m<0){m=11;y--;} sync(y,m);
  });
  next.addEventListener('click', ()=>{
    let y=+ySel.value, m=+mSel.value+1;
    if(m>11){m=0;y++;} sync(y,m);
  });
  todayBtn.addEventListener('click', ()=>{
    const t=new Date(); sync(t.getFullYear(), t.getMonth());
  });

  // í‚¤ë³´ë“œ â† â†’
  window.addEventListener('keydown', (e)=>{
    if(e.key==='ArrowLeft') prev.click();
    if(e.key==='ArrowRight') next.click();
  });

  sync(initialY, initialM, false);
}

// ì´ˆê¸° ì›”: ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ?y=YYYY&m=MM ì§€ì›
(function(){
  const t = new Date();
  const y = +qs.get('y') || t.getFullYear();
  const m = clamp(1, +qs.get('m') || (t.getMonth()+1), 12) - 1; // 0-11
  initControls(y, m);
})();
</script>

<p class="legend">ë‹¬ ì¢Œìš° í™”ì‚´í‘œ(â† â†’)ë¡œ ì´ë™ Â· ìƒë‹¨ ì…€ë ‰í„°ë¡œ ì—°/ì›” ë³€ê²½ Â· â€œì˜¤ëŠ˜â€ë¡œ í˜„ì¬ ë‹¬ ì´ë™</p>
